<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Benvenuto su R3cap</title>

    <!-- Aggiungi il link al favicon -->
    <link rel="icon" href="/media/logo.ico" type="image/x-icon">

    <link rel="stylesheet" th:href="@{/css/index.css}" />
</head>
<body>

    <!-- Titolo -->
    <h1>
        Benvenuto su
        <img th:src="@{/media/logo.png}" alt="Logo R3cap" style="height: 250px;" />
    </h1>

    <!-- Messaggio per utenti non loggati -->
    <div th:if="${utente == null}" class="access-warning">
        <p>Per consultare e caricare appunti su R3cap Ã¨ necessario accedere</p>
        <div class="auth-buttons">
            <a th:href="@{/register}" class="btn-auth">Registrati</a>
            <a th:href="@{/login}" class="btn-auth">Accedi</a>
        </div>
    </div>

    <!-- Profilo utente in alto a destra (solo se loggato) -->
    <div class="user-profile" th:if="${utente != null}">
        <a th:href="@{/profile}">
            <img th:src="@{${utente.immagineProfilo} != null ? ${utente.immagineProfilo} : '/media/default-profile.png'}" alt="Profilo" class="profile-pic" />
            <div class="user-name">
                <div class="user-first-name" th:text="${utente.nome}"></div>
                <div class="user-last-name" th:text="${utente.cognome}"></div>
            </div>
        </a>
        <form th:action="@{/logout}" method="post" class="logout-form">
            <button type="submit" class="logout-button">Logout</button>
        </form>
    </div>

    <!-- Corso di studi (solo se loggato) -->
    <p th:if="${utente != null}" th:text="'Il tuo corso di studi: ' + ${corsoDiStudi}" class="corso-di-studi"></p>

    <!-- Form di ricerca (solo se loggato) -->
    <div class="search-form" th:if="${utente != null}">
        <form th:action="@{/notes/search}" method="get" style="display: flex; width: 100%;">
            <input type="text" class="search-input" name="query" placeholder="Cerca il tuo R3cap ğŸ“š" required />
            <button type="submit" class="search-button">ğŸ”</button>
        </form>
    </div>

    <!-- Ricerca avanzata - visibile solo se loggato -->
    <div class="advanced-search-box" th:if="${utente != null}">
        <span class="advanced-search-text">Vuoi ricercare in altri corsi di studio?</span>
        <a th:href="@{/notes/ricerca-avanzata}" class="btn-advanced-search">
            ğŸ§ Ricerca avanzata
        </a>
    </div>

    <!-- Pulsante per caricare un appunto (solo se loggato) -->
    <div class="upload-note-box" th:if="${utente != null}">
        <a th:href="@{/notes/upload}" class="btn-upload-note">
            ğŸ“¤ Carica un R3cap
        </a>
    </div>
    

</body>
</html>
